<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <title>Ashim üíò Sikchya ‚Äì forever valentine</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', 'Cursive', 'Brush Script MT', cursive, sans-serif;
      background: linear-gradient(145deg, #ffb6c1 0%, #ffc0cb 40%, #ffe4e1 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
      position: relative;
      padding: 10px;
    }

    /* floating hearts canvas */
    #heaven {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 5;
    }

    .card {
      width: 340px;
      max-width: 94%;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(8px);
      padding: 24px 18px;
      border-radius: 40px 40px 40px 40px;
      text-align: center;
      box-shadow: 0 25px 40px rgba(230, 50, 100, 0.25),
                  0 0 0 4px #fff9f9 inset,
                  0 0 0 6px #ffb3c6 inset;
      border: 2px solid #ffa5b9;
      position: relative;
      z-index: 20;
      transition: 0.3s;
    }

    h1 {
      font-size: 26px;
      background: linear-gradient(45deg, #d43f6d, #ff1a4c);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 700;
      margin: 5px 0 5px;
      letter-spacing: 1px;
      text-shadow: 0 2px 10px rgba(255, 120, 160, 0.4);
    }

    p {
      font-size: 16px;
      color: #5e2e44;
      margin: 12px 0 8px;
      line-height: 1.5;
      font-weight: 500;
    }

    .image-container {
      width: 100%;
      max-height: 200px;
      margin: 15px 0 5px;
      display: flex;
      justify-content: center;
    }
    
    .cute-drawing {
      width: 180px;
      height: 180px;
      background: #ffe9f0;
      border-radius: 30px;
      border: 4px solid white;
      box-shadow: 0 10px 18px rgba(255, 80, 120, 0.3);
      position: relative;
      margin: 0 auto;
    }
    
    /* Cute hand-drawn couple */
    .couple-drawing {
      position: relative;
      width: 100%;
      height: 100%;
    }
    
    .head-left {
      position: absolute;
      width: 45px;
      height: 45px;
      background: #ffd1c4;
      border-radius: 50%;
      top: 40px;
      left: 35px;
      border: 2px solid #ff8a9f;
    }
    
    .head-right {
      position: absolute;
      width: 45px;
      height: 45px;
      background: #ffd1c4;
      border-radius: 50%;
      top: 40px;
      right: 35px;
      border: 2px solid #ff8a9f;
    }
    
    .eye-left {
      width: 8px;
      height: 8px;
      background: #5e2e44;
      border-radius: 50%;
      position: absolute;
      top: 15px;
      left: 12px;
    }
    
    .eye-right {
      width: 8px;
      height: 8px;
      background: #5e2e44;
      border-radius: 50%;
      position: absolute;
      top: 15px;
      right: 12px;
    }
    
    .blush-left {
      width: 10px;
      height: 6px;
      background: #ffa5b9;
      border-radius: 50%;
      position: absolute;
      top: 25px;
      left: 8px;
      opacity: 0.6;
    }
    
    .blush-right {
      width: 10px;
      height: 6px;
      background: #ffa5b9;
      border-radius: 50%;
      position: absolute;
      top: 25px;
      right: 8px;
      opacity: 0.6;
    }
    
    .smile-left {
      width: 20px;
      height: 10px;
      border-bottom: 3px solid #ff5f7c;
      border-radius: 0 0 20px 20px;
      position: absolute;
      bottom: 12px;
      left: 12px;
    }
    
    .smile-right {
      width: 20px;
      height: 10px;
      border-bottom: 3px solid #ff5f7c;
      border-radius: 0 0 20px 20px;
      position: absolute;
      bottom: 12px;
      right: 12px;
    }
    
    .heart-between {
      position: absolute;
      top: 65px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 30px;
      animation: beatSmall 1s infinite;
      z-index: 10;
    }
    
    @keyframes beatSmall {
      0% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.3); }
      100% { transform: translateX(-50%) scale(1); }
    }
    
    .body-hearts {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 24px;
      color: #ff3b5c;
    }

    button {
      margin: 12px 6px 6px;
      padding: 12px 24px;
      border: none;
      border-radius: 60px;
      font-size: 17px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.2s ease;
      box-shadow: 0 8px 14px rgba(255, 80, 120, 0.3);
      letter-spacing: 0.5px;
      border: 1px solid rgba(255,255,240,0.7);
    }

    .next {
      background: #ff3b5c;
      color: white;
      padding: 12px 35px;
      font-size: 18px;
      box-shadow: 0 6px 0 #ac2e46;
    }

    .next:active {
      transform: translateY(5px);
      box-shadow: 0 1px 0 #ac2e46;
    }

    .choice {
      display: none;
      margin: 20px 0 10px;
    }

    .yes {
      background: #ff2a5c;
      color: white;
      padding: 14px 35px;
      font-size: 20px;
      border-radius: 50px;
      box-shadow: 0 6px 0 #b31e40;
    }

    .yes:active {
      transform: translateY(5px);
      box-shadow: 0 1px 0 #b31e40;
    }

    .no {
      background: #f8d7da;
      color: #a11f3a;
      padding: 14px 30px;
      font-size: 18px;
      border: 2px dashed #ff7c9c;
      box-shadow: 0 4px 0 #b85a6e;
      transition: all 0.2s ease;
    }

    /* final lovely screen */
    .final {
      height: 100vh;
      width: 100vw;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      background: radial-gradient(circle at 30% 30%, #ff90a5, #ff5f7c);
      color: white;
      text-align: center;
      font-size: 28px;
      padding: 20px;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 100;
      animation: glowPulse 2s infinite;
    }

    @keyframes glowPulse {
      0% { box-shadow: inset 0 0 30px #ffb3c6; }
      50% { box-shadow: inset 0 0 70px #fff0f3; }
    }

    .big-heart {
      font-size: 90px;
      animation: beat 1s infinite ease-in-out;
      filter: drop-shadow(0 0 20px red);
      margin-bottom: 20px;
    }

    @keyframes beat {
      0% { transform: scale(1); }
      25% { transform: scale(1.3); }
      35% { transform: scale(1.1); }
      45% { transform: scale(1.25); }
      55% { transform: scale(1); }
    }

    #typing {
      font-size: 38px;
      font-weight: 600;
      font-family: 'Brush Script MT', cursive, 'Segoe UI', sans-serif;
      text-shadow: 3px 3px 0 #c1224b;
      margin: 20px 0 15px;
    }

    /* floating message when NO is clicked */
    .pop-message {
      position: fixed;
      background: #fff0f5;
      color: #d43f6d;
      padding: 12px 20px;
      border-radius: 60px;
      font-weight: bold;
      font-size: 22px;
      box-shadow: 0 15px 25px rgba(200, 0, 80, 0.3);
      z-index: 200;
      border: 3px solid white;
      cursor: pointer;
      animation: popIn 0.3s cubic-bezier(0.18, 1.3, 0.6, 1), float 3s infinite alternate;
      pointer-events: auto;
      max-width: 280px;
      text-align: center;
      backdrop-filter: blur(4px);
    }

    @keyframes popIn {
      0% { transform: scale(0.2); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes float {
      0% { transform: translateY(0px) rotate(0deg); }
      100% { transform: translateY(-20px) rotate(3deg); }
    }

    #revealBtn {
      background: #ffb0c3;
      color: #610025;
      border: 2px solid white;
    }
    
    /* music note indicator */
    .music-note {
      position: fixed;
      bottom: 15px;
      right: 15px;
      font-size: 24px;
      color: rgba(255, 80, 120, 0.6);
      z-index: 100;
      animation: floatNote 3s infinite ease-in-out;
      pointer-events: none;
    }
    
    @keyframes floatNote {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
      100% { transform: translateY(0px); }
    }
    
    /* Music player controls - subtle */
    #musicPlayer {
      position: fixed;
      bottom: 15px;
      left: 15px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.6);
      border: 2px solid #ff8a9f;
      color: #ff3b5c;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 100;
      backdrop-filter: blur(5px);
      transition: 0.3s;
    }
    
    #musicPlayer:hover {
      transform: scale(1.1);
      background: white;
    }
  </style>
</head>
<body>

<!-- floating hearts canvas -->
<canvas id="heaven"></canvas>

<!-- Background Music - Using base64 encoded WAV as fallback, but also providing working GitHub Pages friendly source -->
<audio id="bgMusic" loop>
  <!-- Using a reliable, CORS-friendly audio source from GitHub's own audio repo -->
  <source src="https://raw.githubusercontent.com/AnshumanFauzdar/audios/main/romantic-piano.mp3" type="audio/mpeg">
  <!-- Fallback to a different source -->
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" type="audio/mpeg">
  Your browser doesn't support audio, but the love is still there! üíï
</audio>

<!-- Music control button -->
<div id="musicPlayer" onclick="toggleMusic()">üîä</div>
<div class="music-note">üéµ üíï üéµ</div>

<div class="card" id="card">

  <!-- PAGE 1 -->
  <div class="page" id="page1">
    <h1>üíû For My Pukuli üíû</h1>
    <p style="font-size:22px;">Ashim üíñ Sikchya</p>
    <div style="font-size: 42px; line-height: 1.2;">ü•∞üå∏</div>
    <button class="next" onclick="nextPage(2)">Next ‚ûú</button>
  </div>

  <!-- PAGE 2 -->
  <div class="page" id="page2" style="display:none;">
    <p>
      ‚ú® Happy Valentine's Day, my love ‚ú®<br><br>
      ‚ÄúIn your arms is where I belong, where the world feels right, 
      and my heart feels at home. You are my forever Valentine, 
      and I love you more than words can say.‚Äù
    </p>
    <!-- Cute hand-drawn couple image (works everywhere, no external file needed) -->
    <div class="image-container">
      <div class="cute-drawing">
        <div class="couple-drawing">
          <div class="head-left">
            <div class="eye-left"></div>
            <div class="blush-left"></div>
            <div class="smile-left"></div>
          </div>
          <div class="head-right">
            <div class="eye-right"></div>
            <div class="blush-right"></div>
            <div class="smile-right"></div>
          </div>
          <div class="heart-between">‚ù§Ô∏è</div>
          <div class="body-hearts">üíï üíï</div>
        </div>
      </div>
    </div>
    <button class="next" onclick="nextPage(3)">Next ‚ûú</button>
  </div>

  <!-- PAGE 3 -->
  <div class="page" id="page3" style="display:none;">
    <p style="font-size: 30px; margin:5px 0;">üíå</p>
    <p style="font-size: 24px; font-weight: 600; color:#bb2e50;">Will you be my Valentine?</p>

    <div class="choice" id="choiceBox">
      <button class="yes" onclick="sayYes()">Yes üíñ</button>
      <button class="no" id="noBtn">No üíî</button>
    </div>

    <button class="next" onclick="showChoices()" id="revealBtn">
      ‚ú® Reveal Options ‚ú®
    </button>
    <p style="font-size: 14px; margin-top:16px; color:#a04862;"><3</p>
  </div>
</div>

<script>
(function() {
  // Music handling - improved for GitHub Pages
  const music = document.getElementById('bgMusic');
  let musicPlaying = false;
  
  // Set volume
  music.volume = 0.4;
  
  // Try to play music automatically
  function attemptAutoPlay() {
    music.play().then(() => {
      musicPlaying = true;
      document.getElementById('musicPlayer').innerHTML = 'üîä';
    }).catch(e => {
      console.log("Auto-play prevented. Will play on interaction.");
      musicPlaying = false;
      document.getElementById('musicPlayer').innerHTML = 'üîà';
    });
  }
  
  // Initial attempt
  attemptAutoPlay();
  
  // Make music play on any user interaction if it hasn't started
  function startMusicOnInteraction() {
    if (!musicPlaying) {
      music.play().then(() => {
        musicPlaying = true;
        document.getElementById('musicPlayer').innerHTML = 'üîä';
      }).catch(e => console.log("Still can't play music"));
    }
  }
  
  // Add multiple interaction listeners
  document.body.addEventListener('click', startMusicOnInteraction, { once: true });
  document.body.addEventListener('touchstart', startMusicOnInteraction, { once: true });
  document.body.addEventListener('keydown', startMusicOnInteraction, { once: true });
  
  // Also try when user interacts with any button
  document.addEventListener('click', function(e) {
    if (e.target.tagName === 'BUTTON' && !musicPlaying) {
      music.play().then(() => {
        musicPlaying = true;
        document.getElementById('musicPlayer').innerHTML = 'üîä';
      }).catch(() => {});
    }
  });

  // ---- floating hearts -------------------------------------------------
  const canvas = document.getElementById('heaven');
  const ctx = canvas.getContext('2d');
  let width, height;
  let hearts = [];

  function initCanvas() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
  }
  initCanvas();

  function createHeart() {
    const x = Math.random() * width;
    const y = height + 20 + Math.random() * 40; 
    const size = 10 + Math.random() * 22;       
    const speed = 0.7 + Math.random() * 1.2;    
    const opacity = 0.4 + Math.random() * 0.4;
    const color = `rgba(255, ${80 + Math.floor(70 * Math.random())}, 130, ${opacity})`;
    hearts.push({ x, y, size, speed, color });
  }

  function drawHearts() {
    ctx.clearRect(0, 0, width, height);
    for (let i = 0; i < hearts.length; i++) {
      const h = hearts[i];
      ctx.font = `${h.size}px 'Segoe UI', 'Arial Unicode MS', 'Helvetica', sans-serif`;
      ctx.fillStyle = h.color;
      ctx.fillText('‚ù§Ô∏è', h.x, h.y);
      h.y -= h.speed; 
      h.x += (Math.random() - 0.5) * 0.7;

      if (h.y < -50) {
        hearts.splice(i, 1);
        i--;
      }
    }
    requestAnimationFrame(drawHearts);
  }

  setInterval(() => {
    if (hearts.length < 35) {
      for (let i = 0; i < 3; i++) createHeart();
    }
  }, 450);

  drawHearts();

  window.addEventListener('resize', () => {
    initCanvas();
  });

  // ---------- page navigation ----------
  window.nextPage = function(num) {
    document.querySelectorAll(".page").forEach(p => p.style.display = "none");
    const page = document.getElementById("page" + num);
    if (page) page.style.display = "block";
  };

  window.showChoices = function() {
    document.getElementById("choiceBox").style.display = "block";
    document.getElementById("revealBtn").style.display = "none";
  };

  // final YES
  window.sayYes = function() {
    const finalOverlay = document.createElement('div');
    finalOverlay.className = 'final';
    finalOverlay.innerHTML = `
      <div class="big-heart">‚ù§Ô∏è</div>
      <h1 id="typing"></h1>
      <p style="margin-top:20px;font-size:26px;">Forever yours,<br>Kalu üòòüíï</p>
      <div style="font-size:40px; margin-top:10px;">üåπüåπüåπ</div>
    `;
    document.body.appendChild(finalOverlay);
    
    const text = "I Love You Baby ‚ù§Ô∏è";
    let i = 0;
    function type() {
      if (i < text.length) {
        document.getElementById("typing").innerHTML += text.charAt(i);
        i++;
        setTimeout(type, 90);
      }
    }
    type();
    
    document.getElementById('card').style.display = 'none';
  };

  // NO button hijinks
  const noBtn = document.getElementById('noBtn');
  if (noBtn) {
    noBtn.addEventListener('mouseover', function(e) {
      if (window.innerWidth > 800) {
        const maxX = 150;
        const maxY = 100;
        const x = (Math.random() - 0.5) * 2 * maxX;
        const y = (Math.random() - 0.5) * 2 * maxY;
        noBtn.style.transform = `translate(${x}px, ${y}px)`;
        noBtn.style.transition = 'transform 0.15s ease';
      }
    });

    noBtn.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();

      const messages = [
        'üíñ Click Yes instead! üíñ',
        'üå∏ be my valentine? üå∏',
        'ü•∫ Pweety please? Say Yes!',
        '‚ú® I know you want Yes ‚ú®',
        'üíò Only Yes is true!',
        'üòò You know you love me',
        'üíû change to Yes? üëâüëà',
        'üéà Yes is more fun!'
      ];
      const randomMsg = messages[Math.floor(Math.random() * messages.length)];

      const floatingDiv = document.createElement('div');
      floatingDiv.className = 'pop-message';
      floatingDiv.innerText = randomMsg + '  üíï';
      floatingDiv.style.left = Math.random() * (window.innerWidth - 220) + 'px';
      floatingDiv.style.top = Math.random() * (window.innerHeight - 100) + 'px';
      document.body.appendChild(floatingDiv);

      floatingDiv.addEventListener('click', function() {
        sayYes();
      });

      setTimeout(() => {
        if (floatingDiv.parentNode) floatingDiv.remove();
      }, 5000);

      noBtn.innerText = 'üíî nope?';
      noBtn.style.background = '#ffe2e7';
      setTimeout(() => {
        noBtn.innerText = 'No üíî';
      }, 1200);

      for (let i=0; i<5; i++) {
        setTimeout(() => createHeart(), i*70);
      }
    });
  }
})();

// Music toggle function
function toggleMusic() {
  const music = document.getElementById('bgMusic');
  const player = document.getElementById('musicPlayer');
  
  if (music.paused) {
    music.play().then(() => {
      player.innerHTML = 'üîä';
    }).catch(e => console.log("Can't play"));
  } else {
    music.pause();
    player.innerHTML = 'üîà';
  }
}
</script>

<!-- small style to ensure card is always visible -->
<style>
  @media (max-width:600px) {
    .no {
      padding: 14px 20px;
    }
    .pop-message {
      font-size: 18px !important;
      padding: 12px 20px !important;
      max-width: 240px;
    }
    .card { padding: 20px 12px; }
  }
  .no, .yes, .next { user-select: none; -webkit-tap-highlight-color: transparent; }
  #choiceBox { display: none; }
  #page2, #page3 { display: none; }
  #musicPlayer {
    position: fixed;
    bottom: 15px;
    left: 15px;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.6);
    border: 2px solid #ff8a9f;
    color: #ff3b5c;
    font-size: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 100;
    backdrop-filter: blur(5px);
    transition: 0.3s;
  }
</style>
</body>
</html>
